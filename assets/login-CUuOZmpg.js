import{u as T,r as h,a as V,b as B,M as u,d as P,c as _,o as x,e as t,f as S,w as R,g as z,h as e,i as f,v as m,t as v,T as L,n as U}from"./index-B_OwJp6P.js";import{r as $,l as M}from"./api-DXQI_06g.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F="/blog-manage-ts/assets/image-B8HahkB6.png",I=()=>{const C=T(),c=h("login"),p=V(),l=B({account:"",password:""}),d=B({account:"",password:"",confirmPassword:""}),g=r=>{const n=r.currentTarget,i=document.createElement("span"),a=n.getBoundingClientRect(),s=Math.max(a.width,a.height),o=r.clientX-a.left-s/2,w=r.clientY-a.top-s/2;i.style.width=i.style.height=`${s}px`,i.style.left=`${o}px`,i.style.top=`${w}px`,i.classList.add("ripple");const k=n.querySelector(".ripple");k&&k.remove(),n.appendChild(i)};return{mode:c,loginForm:l,registerForm:d,handleLogin:async r=>{if(g(r),!l.account||!l.password){u.error("请输入账号和密码");return}try{const n=await M(l);if(!n)return;const{success:i,code:a,data:s}=n?.data;if(i&&a===0){const{currentToken:o,role:w}=s??{};o&&localStorage.setItem("token",o),w&&(p.role=w),C.push("/mainBox")}else{const{message:o}=s;u.error(o)}}catch(n){console.error(n),u.error("账号密码错误")}},handleRegister:async r=>{if(g(r),!d.account||!d.password){u.error("请输入账号和密码");return}else if(!d.confirmPassword){u.error("请确认密码");return}try{const n=await $(d);if(!n)return;const{success:i,code:a,data:s}=n?.data;if(i&&a===0)c.value="login";else{const{message:o}=s;u.error(o)}}catch(n){console.error(n)}}}},A={class:"main flexCenter"},N={key:0,class:"setting"},E={class:"bottom"},H={class:"input"},Y={class:"input-container"},q={class:"floating-label"},X={class:"input-container"},j={class:"floating-label"},G={class:"bottom-tip"},J={class:"tipContainer flex-end"},K={key:0,class:"setting"},O={class:"bottom"},Q={class:"input"},W={class:"input-container"},Z={class:"floating-label"},tt={class:"input-container"},st={class:"floating-label"},ot={class:"input-container"},et={class:"floating-label"},nt={class:"bottom-tip"},it={class:"tipContainer flex-end"},lt=P({__name:"login",setup(C){const{mode:c,loginForm:p,registerForm:l,handleLogin:d,handleRegister:g}=I(),b=h("Account"),y=h("Password"),r=h("ConfirmPassword"),n=a=>{c.value=a},i=()=>{window.open("https://blog.ybcfish.cloud","_blank")};return(a,s)=>(x(),_("div",{id:"login",style:U({backgroundImage:`url(${e(F)})`,backgroundSize:"cover"})},[s[16]||(s[16]=t("div",{class:"header"},null,-1)),t("div",A,[S(L,{name:"login"},{default:R(()=>[e(c)==="login"?(x(),_("div",N,[s[11]||(s[11]=t("div",{class:"top"},[t("h4",{style:{"font-size":"1.5rem",color:"white","font-weight":"600"}},"Sign in"),t("h4",{style:{"font-size":"1.5rem",color:"white","font-weight":"600"}},"欢迎回来")],-1)),t("div",E,[t("div",H,[t("div",Y,[f(t("input",{type:"text",class:"floating-input","onUpdate:modelValue":s[0]||(s[0]=o=>e(p).account=o),placeholder:""},null,512),[[m,e(p).account]]),t("label",q,v(b.value),1)]),t("div",X,[f(t("input",{type:"password",class:"floating-input","onUpdate:modelValue":s[1]||(s[1]=o=>e(p).password=o),placeholder:""},null,512),[[m,e(p).password]]),t("label",j,v(y.value),1)])]),t("button",{class:"login-btn",onClick:s[2]||(s[2]=(...o)=>e(d)&&e(d)(...o))},"Sign in")]),t("div",G,[s[9]||(s[9]=t("div",{class:"tipContainer"},null,-1)),s[10]||(s[10]=t("div",{class:"tipContainer"},[t("span",null,"Don't have account?")],-1)),t("div",J,[t("span",{class:"tip",onClick:s[3]||(s[3]=o=>n("register"))},"To Register")])])])):z("",!0)]),_:1}),S(L,{name:"register"},{default:R(()=>[e(c)==="register"?(x(),_("div",K,[s[14]||(s[14]=t("div",{class:"top"},[t("h4",{style:{"font-size":"1.5rem",color:"white","font-weight":"600"}},"Sign Up"),t("h4",{style:{"font-size":"1.5rem",color:"white","font-weight":"600"}},"欢迎注册")],-1)),t("div",O,[t("div",Q,[t("div",W,[f(t("input",{type:"text",class:"floating-input","onUpdate:modelValue":s[4]||(s[4]=o=>e(l).account=o),placeholder:""},null,512),[[m,e(l).account]]),t("label",Z,v(b.value),1)]),t("div",tt,[f(t("input",{type:"password",class:"floating-input","onUpdate:modelValue":s[5]||(s[5]=o=>e(l).password=o),placeholder:""},null,512),[[m,e(l).password]]),t("label",st,v(y.value),1)]),t("div",ot,[f(t("input",{type:"password",class:"floating-input","onUpdate:modelValue":s[6]||(s[6]=o=>e(l).confirmPassword=o),placeholder:""},null,512),[[m,e(l).confirmPassword]]),t("label",et,v(r.value),1)])]),t("button",{class:"login-btn",onClick:s[7]||(s[7]=(...o)=>e(g)&&e(g)(...o))},"Register")]),t("div",nt,[s[12]||(s[12]=t("div",{class:"tipContainer"},null,-1)),s[13]||(s[13]=t("div",{class:"tipContainer"},[t("span",null,"Already have account?")],-1)),t("div",it,[t("span",{class:"tip",onClick:s[8]||(s[8]=o=>n("login"))},"To Login")])])])):z("",!0)]),_:1})]),t("div",{class:"footer flexCenter",style:{color:"white","font-size":"15px"}},[t("div",{class:"flexBetween",style:{width:"80%"}},[s[15]||(s[15]=t("span",null,"Designed by Yu Bingcao in 2025",-1)),t("span",{onClick:i,style:{cursor:"pointer"}},"About Me")])])],4))}}),ct=D(lt,[["__scopeId","data-v-592a4985"]]);export{ct as default};
