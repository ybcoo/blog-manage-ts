import{d as b,f as $,a as S,u as I,g as C,h as L,c as y,o as _,b as s,i as p,w as d,j as u,e,k as h,l as g,m as k,t as F,n as M,p as H,q as R,s as T,x as V,y as P}from"./index-hce3OBas.js";import{i as x}from"./svg-CVFzrp4H.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as A}from"./AtricleStore-BmVCoFZh.js";import{d as N,c as E}from"./api-DXy1NF1I.js";const q={class:"mainMenu"},z={class:"menu"},U={class:"menu-item gap_c5"},j={class:"spanFlash",style:{flex:"1"}},O={class:"flash"},W={class:"arrow flash"},G=["src"],J={class:"subMenu gap_c5"},K={class:"spanFlash"},Q={class:"flash"},X={class:"spanFlash"},Y={class:"flash"},Z={class:"spanFlash menuStyle hoverBg"},ss={class:"flash"},es={class:"spanFlash"},ts={class:"flash"},os={class:"spanFlash"},ls={class:"flash"},as={class:"spanFlash"},ns={class:"flash"},is=b({__name:"sideMenu",setup(v){const o=$(),i=S(!1),r=I(),l=C(),a=()=>{r.push("/login"),localStorage.removeItem("token")};return(c,t)=>{const m=L("router-link");return _(),y("div",q,[s("nav",z,[s("div",U,[s("div",{class:"menu-item-content menuStyle hoverBg",onClick:t[0]||(t[0]=n=>i.value=!i.value)},[s("div",j,[t[1]||(t[1]=s("div",{class:"pic"},"I",-1)),d(s("span",O,"Blankness",512),[[u,!e(o).isCollapse]])]),d(s("div",W,[s("img",{src:e(x).arrow,alt:"arrow"},null,8,G)],512),[[u,!e(o).isCollapse]])]),d(s("div",J,[p(m,{class:h(["linkStyle menuStyle",{isSelect:e(l).name==="profile",hoverBg:e(l).name!=="profile"}]),to:"/profile"},{default:g(()=>[s("div",K,[t[2]||(t[2]=s("div",{class:"pic"},"M",-1)),d(s("span",Q,"My profile",512),[[u,!e(o).isCollapse]])])]),_:1},8,["class"]),p(m,{class:h(["linkStyle menuStyle",{isSelect:e(l).name==="settings",hoverBg:e(l).name!=="settings"}]),to:"/settings"},{default:g(()=>[s("div",X,[t[3]||(t[3]=s("div",{class:"pic"},"S",-1)),d(s("span",Y,"Settings",512),[[u,!e(o).isCollapse]])])]),_:1},8,["class"]),s("div",Z,[s("div",{class:"linkStyle",onClick:a},[t[4]||(t[4]=s("div",{class:"pic"},"L",-1)),d(s("span",ss,"Logout",512),[[u,!e(o).isCollapse]])])])],512),[[u,i.value]])]),t[8]||(t[8]=s("div",{class:"line"},null,-1)),p(m,{class:h(["menu-item menu-item-content menuStyle",{isSelect:e(l).name==="home",hoverBg:e(l).name!=="home"}]),to:"/home"},{default:g(()=>[s("div",es,[t[5]||(t[5]=s("div",{class:"pic"},"H",-1)),d(s("span",ts,"Home",512),[[u,!e(o).isCollapse]])])]),_:1},8,["class"]),p(m,{class:h(["menu-item menu-item-content menuStyle",{isSelect:e(l).name==="about",hoverBg:e(l).name!=="about"}]),to:"/about"},{default:g(()=>[s("div",os,[t[6]||(t[6]=s("div",{class:"pic"},"A",-1)),d(s("span",ls,"About",512),[[u,!e(o).isCollapse]])])]),_:1},8,["class"]),p(m,{class:h(["menu-item menu-item-content menuStyle",{isSelect:e(l).name==="share",hoverBg:e(l).name!=="share"}]),to:"/share"},{default:g(()=>[s("div",as,[t[7]||(t[7]=s("div",{class:"pic"},"S",-1)),d(s("span",ns,"Share",512),[[u,!e(o).isCollapse]])])]),_:1},8,["class"])])])}}}),cs=B(is,[["__scopeId","data-v-d1bcd72a"]]),rs=v=>{const o=A();C();const i=I();return{saveForm:async()=>{try{(await E(o?.articleForm))?.data?.success&&i.push("/home")}catch(a){console.error(a)}},handleArticleDelete:async()=>{try{let a=null;o?.deleteIdList?.length>0?a=o.deleteIdList:a=o.selectedItem,(await N(a))?.data?.success&&(o.deleteIdList=[],o.selectedItem=null,v("refreshHome"))}catch(a){console.error(a)}}}},ds={class:"topBar-left",style:{flex:"1"}},us=["src"],ms={key:0,class:"listButton"},ps={class:"topBar-right",style:{flex:"1"}},vs={key:1,class:"listConfig"},_s={class:"tipMode"},fs={class:"option"},hs=b({__name:"Navigation",props:{isFixed:{type:Boolean},isCollapse:{type:Boolean}},emits:["toggleCollapse","refreshHome"],setup(v,{emit:o}){const i=o,{saveForm:r,handleArticleDelete:l}=rs(i),a=A(),c=C(),t=()=>{i("toggleCollapse")};return(m,n)=>(_(),y("div",null,[s("div",{class:h(["top",{fixed:v.isFixed}]),style:{"border-radius":"8px",opacity:"0.5"}},[s("div",ds,[s("div",{class:"flexCenter flash",onClick:t},[s("img",{src:v.isCollapse?e(x).collapseSelect:e(x).collapseDefault,alt:"collapse"},null,8,us)]),e(c).name=="home"?(_(),y("div",ms,[...n[2]||(n[2]=[s("button",{class:"btnPage"},"last",-1),s("span",null,F("1/1"),-1),s("button",{class:"btnPage"},"next",-1)])])):k("",!0)]),s("div",ps,[e(c).name=="profile"?(_(),y("div",{key:0,class:"save-btn",onClick:n[0]||(n[0]=(...f)=>e(r)&&e(r)(...f))},"Save Info")):k("",!0),e(c).name=="home"&&e(a)?.selectedItem?(_(),y("div",vs,[s("div",_s,F(e(a)?.deleteIdList?.length?"Multiple Pick":"Single Pick"),1),s("div",fs,[n[3]||(n[3]=s("button",{class:"btnPage"},"编辑",-1)),s("button",{class:"btnPage red",onClick:n[1]||(n[1]=(...f)=>e(l)&&e(l)(...f))},"删除")])])):k("",!0)])],2),s("div",{class:"occupy",style:M({height:v.isFixed?"60px":"0",width:"100%",flexShrink:0})},null,4)]))}}),gs=B(hs,[["__scopeId","data-v-505b39a0"]]),ys={class:"main"},Ss={class:"scrollContainer"},Cs={class:"bottom"},ks=b({__name:"mainBox",setup(v){const o=C(),i=$(),r=S(null),l=S(!1);let a=0;const c=S(null),t=()=>{if(c.value){const n=c.value.scrollTop;l.value=n>a}},m=async()=>{o.name==="home"&&r.value&&await r.value.getArticleList()};return H(()=>{R(()=>{if(c.value){const n=document.querySelector(".top");n&&(a=n.offsetTop),c.value.addEventListener("scroll",t)}})}),T(()=>{c.value&&c.value.removeEventListener("scroll",t)}),(n,f)=>{const D=L("RouterView");return _(),y("div",ys,[s("div",{class:"left",style:M({maxWidth:e(i).isCollapse?"72px":"220px"})},[p(cs)],4),s("div",Ss,[s("div",{class:"right",ref_key:"rightContainer",ref:c},[p(gs,{"is-fixed":l.value,"is-collapse":e(i).isCollapse,onToggleCollapse:f[0]||(f[0]=w=>e(i).isCollapse=!e(i).isCollapse),onRefreshHome:m},null,8,["is-fixed","is-collapse"]),s("div",Cs,[p(D,null,{default:g(({Component:w})=>[(_(),V(P(w),{ref_key:"routerViewRef",ref:r},null,512))]),_:1})])],512)])])}}}),$s=B(ks,[["__scopeId","data-v-b71dee2e"]]);export{$s as default};
