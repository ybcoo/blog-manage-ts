import{d as B,a as b,r as y,u as M,j as C,k as L,c as S,o as _,e as s,f as p,i as d,l as u,h as e,m as h,w as g,M as I,g as k,t as $,n as A,p as R,q as T,s as V,x as P,y as N}from"./index-C9jAujhV.js";import{i as x}from"./svg-ioeJ66Oq.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as D}from"./AtricleStore-DlJgfT0L.js";import{d as E,c as q}from"./api-0_8gUDSp.js";const z={class:"mainMenu"},U={class:"menu"},j={class:"menu-item gap_c5"},O={class:"spanFlash",style:{flex:"1"}},W={class:"flash"},G={class:"arrow flash"},J=["src"],K={class:"subMenu gap_c5"},Q={class:"spanFlash"},X={class:"flash"},Y={class:"spanFlash"},Z={class:"flash"},ss={class:"spanFlash menuStyle hoverBg"},es={class:"flash"},ts={class:"spanFlash"},os={class:"flash"},ls={class:"spanFlash"},as={class:"flash"},ns={class:"spanFlash"},is={class:"flash"},cs=B({__name:"sideMenu",setup(v){const l=b(),i=y(!1),c=M(),a=C(),r=()=>{c.push("/login"),localStorage.removeItem("token")};return(o,t)=>{const m=L("router-link");return _(),S("div",z,[s("nav",U,[s("div",j,[s("div",{class:"menu-item-content menuStyle hoverBg",onClick:t[0]||(t[0]=n=>i.value=!i.value)},[s("div",O,[t[1]||(t[1]=s("div",{class:"pic"},"I",-1)),d(s("span",W,"Blankness",512),[[u,!e(l).isCollapse]])]),d(s("div",G,[s("img",{src:e(x).arrow,alt:"arrow"},null,8,J)],512),[[u,!e(l).isCollapse]])]),d(s("div",K,[p(m,{class:h(["linkStyle menuStyle",{isSelect:e(a).name==="article",hoverBg:e(a).name!=="article"}]),to:"/article"},{default:g(()=>[s("div",Q,[t[2]||(t[2]=s("div",{class:"pic"},"M",-1)),d(s("span",X,"My article",512),[[u,!e(l).isCollapse]])])]),_:1},8,["class"]),p(m,{class:h(["linkStyle menuStyle",{isSelect:e(a).name==="settings",hoverBg:e(a).name!=="settings"}]),to:"/settings"},{default:g(()=>[s("div",Y,[t[3]||(t[3]=s("div",{class:"pic"},"S",-1)),d(s("span",Z,"Settings",512),[[u,!e(l).isCollapse]])])]),_:1},8,["class"]),s("div",ss,[s("div",{class:"linkStyle",onClick:r},[t[4]||(t[4]=s("div",{class:"pic"},"L",-1)),d(s("span",es,"Logout",512),[[u,!e(l).isCollapse]])])])],512),[[u,i.value]])]),t[8]||(t[8]=s("div",{class:"line"},null,-1)),p(m,{class:h(["menu-item menu-item-content menuStyle",{isSelect:e(a).name==="home",hoverBg:e(a).name!=="home"}]),to:"/home"},{default:g(()=>[s("div",ts,[t[5]||(t[5]=s("div",{class:"pic"},"H",-1)),d(s("span",os,"Home",512),[[u,!e(l).isCollapse]])])]),_:1},8,["class"]),p(m,{class:h(["menu-item menu-item-content menuStyle",{isSelect:e(a).name==="about",hoverBg:e(a).name!=="about"}]),to:"/about"},{default:g(()=>[s("div",ls,[t[6]||(t[6]=s("div",{class:"pic"},"A",-1)),d(s("span",as,"About",512),[[u,!e(l).isCollapse]])])]),_:1},8,["class"]),p(m,{class:h(["menu-item menu-item-content menuStyle",{isSelect:e(a).name==="share",hoverBg:e(a).name!=="share"}]),to:"/share"},{default:g(()=>[s("div",ns,[t[7]||(t[7]=s("div",{class:"pic"},"S",-1)),d(s("span",is,"Share",512),[[u,!e(l).isCollapse]])])]),_:1},8,["class"])])])}}}),rs=w(cs,[["__scopeId","data-v-bfc37e14"]]),ds=v=>{const l=D();C();const i=M(),c=b();return{saveForm:async()=>{if(c.role!=="admin"){I.error("访客暂无权限～");return}try{(await q(l?.articleForm))?.data?.success&&i.push("/home")}catch(o){console.error(o)}},handleArticleDelete:async()=>{if(c.role!=="admin"){I.error("访客暂无权限～");return}try{let o=null;l?.deleteIdList?.length>0?o=l.deleteIdList:o=l.selectedItem,(await E(o))?.data?.success&&(l.deleteIdList=[],l.selectedItem=null,v("refreshHome"))}catch(o){console.error(o)}}}},us={class:"topBar-left",style:{flex:"1"}},ms=["src"],ps={key:0,class:"listButton"},vs={class:"topBar-right",style:{flex:"1"}},_s={key:1,class:"listConfig"},fs={class:"tipMode"},hs={class:"option"},gs=B({__name:"Navigation",props:{isFixed:{type:Boolean},isCollapse:{type:Boolean}},emits:["toggleCollapse","refreshHome"],setup(v,{emit:l}){const i=l,{saveForm:c,handleArticleDelete:a}=ds(i),r=D(),o=C(),t=()=>{i("toggleCollapse")};return(m,n)=>(_(),S("div",null,[s("div",{class:h(["top",{fixed:v.isFixed}]),style:{"border-radius":"8px",opacity:"0.5"}},[s("div",us,[s("div",{class:"flexCenter flash",onClick:t},[s("img",{src:v.isCollapse?e(x).collapseSelect:e(x).collapseDefault,alt:"collapse"},null,8,ms)]),e(o).name=="home"?(_(),S("div",ps,[...n[2]||(n[2]=[s("button",{class:"btnPage"},"last",-1),s("span",null,$("1/1"),-1),s("button",{class:"btnPage"},"next",-1)])])):k("",!0)]),s("div",vs,[e(o).name=="article"?(_(),S("div",{key:0,class:"save-btn",onClick:n[0]||(n[0]=(...f)=>e(c)&&e(c)(...f))},"Save Info")):k("",!0),e(o).name=="home"&&(e(r)?.selectedItem||e(r)?.deleteIdList?.length)?(_(),S("div",_s,[s("div",fs,$(e(r)?.deleteIdList?.length?"Multiple Pick":"Single Pick"),1),s("div",hs,[n[3]||(n[3]=s("button",{class:"btnPage"},"编辑",-1)),s("button",{class:"btnPage red",onClick:n[1]||(n[1]=(...f)=>e(a)&&e(a)(...f))},"删除")])])):k("",!0)])],2),s("div",{class:"occupy",style:A({height:v.isFixed?"60px":"0",width:"100%",flexShrink:0})},null,4)]))}}),Ss=w(gs,[["__scopeId","data-v-a4848887"]]),ys={class:"main"},Cs={class:"scrollContainer"},ks={class:"bottom"},xs=B({__name:"mainBox",setup(v){const l=C(),i=b(),c=y(null),a=y(!1);let r=0;const o=y(null),t=()=>{if(o.value){const n=o.value.scrollTop;a.value=n>r}},m=async()=>{l.name==="home"&&c.value&&await c.value.getArticleList()};return R(()=>{T(()=>{if(o.value){const n=document.querySelector(".top");n&&(r=n.offsetTop),o.value.addEventListener("scroll",t)}})}),V(()=>{o.value&&o.value.removeEventListener("scroll",t)}),(n,f)=>{const H=L("RouterView");return _(),S("div",ys,[s("div",{class:"left",style:A({maxWidth:e(i).isCollapse?"72px":"220px"})},[p(rs)],4),s("div",Cs,[s("div",{class:"right",ref_key:"rightContainer",ref:o},[p(Ss,{"is-fixed":a.value,"is-collapse":e(i).isCollapse,onToggleCollapse:f[0]||(f[0]=F=>e(i).isCollapse=!e(i).isCollapse),onRefreshHome:m},null,8,["is-fixed","is-collapse"]),s("div",ks,[p(H,null,{default:g(({Component:F})=>[(_(),P(N(F),{ref_key:"routerViewRef",ref:c},null,512))]),_:1})])],512)])])}}}),$s=w(xs,[["__scopeId","data-v-86063bf2"]]);export{$s as default};
